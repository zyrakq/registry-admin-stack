# Generated by stackbuilder from concatenated .env.example files
# Source files: base/.env.example, step-ca/.env.example, oidc/.env.example, step-ca-trust/.env.example

# === BASE CONFIGURATION ===
# Project name for Docker Compose
COMPOSE_PROJECT_NAME=registry-admin
# The permissions are overridden during mounting,
# making the original image unusable without fixing this issue.
# I chose the option to extend the image, which will fix this.
# IMAGE=zebox/registry-admin:master
IMAGE=localhost/registry-admin:latest

RA_CONFIG_FILE=/app/config/config.yml
APP_UID=1001

RA_DEBUG=false
RA_REGISTRY_HOSTNAME=0.0.0.0

RA_REGISTRY_HOST=https://dist.example.com
RA_REGISTRY_PORT=443
# openssl rand -hex 64
RA_AUTH_TOKEN_SECRET=f81486e638548224a420da83537b79bc354a77ee4e59a28db0b93affa5e786006ed449b2f04e1400b6b655e7b2eb917fa76b91c019d541927ebdb1a9599a8720

RA_STORE_DB_TYPE=embed
RA_STORE_ADMIN_PASSWORD=MNBpJVmctXkAsQyFiePfd4mVvqke6IGz

RA_STORE_EMBED_DB_PATH=/app/data/store.db
# === STEP CA CONFIGURATION ===
# Nginx proxy configuration
VIRTUAL_PORT=80
VIRTUAL_HOST=hub.local

# Step CA SSL configuration
LETSENCRYPT_HOST=hub.local
LETSENCRYPT_EMAIL=john.smith@mail.com
# Oidc
RA_REGISTRY_AUTH_TYPE=token
RA_REGISTRY_ISSUER=example.com
RA_REGISTRY_SERVICE=dist.example.com
# Cert
RA_REGISTRY_CERTS_CERT_PATH=-/app/certs
RA_REGISTRY_CERTS_KEY_PATH=/app/certs/cert.key
RA_REGISTRY_CERTS_PUBLIC_KEY_PATH=/app/certs/cert.pub
RA_REGISTRY_CERTS_CA_ROOT_PATH=/app/certs/cert.crt
RA_REGISTRY_CERTS_IP=
RA_REGISTRY_CERTS_FQDN=hub.example.com
RA_REGISTRY_HTTPS_INSECURE=false
RA_REGISTRY_CERTS_CERT_HTTPS=/certs/${DISTRIBUTION_VIRTUAL_HOST}.crt

DISTRIBUTION_CERTS=distribution-oidc-certs
#Step CA Trust
STEP_CA_TRUST=true
STEP_CA_TRUST_RESTART=true

REQUESTS_CA_BUNDLE=/etc/ssl/certs/ca-certificates.crt
SSL_CERT_FILE=/etc/ssl/certs/ca-certificates.crt

# REQUESTS_CA_BUNDLE=/usr/local/share/ca-certificates/step-ca-bundle.crt
# SSL_CERT_FILE=/usr/local/share/ca-certificates/step-ca-bundle.crt